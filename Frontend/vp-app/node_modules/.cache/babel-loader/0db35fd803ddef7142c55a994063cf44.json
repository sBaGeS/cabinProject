{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Pauli\\\\Desktop\\\\groupC\\\\Frontend\\\\vp-app\\\\src\\\\components\\\\editAgency\\\\EditAgencyDialog.js\";\nimport React, { useState, useEffect } from 'react';\nimport TextField from '@material-ui/core/TextField';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport axios from 'axios';\nconst useStyles = makeStyles(theme => ({\n  formRoot: {\n    '& .MuiTextField-root': {\n      margin: theme.spacing(1),\n      width: '25ch'\n    }\n  },\n  Infotxt: {\n    color: 'yellow'\n  }\n}));\nexport default function EditAgencyDialog(props) {\n  const classes = useStyles();\n  const [dialogOpen, setDialogOpen] = useState(true);\n  const [name, setName] = useState(\"\");\n  const [nameErrorMsg, setNameErrorMsg] = useState(\"\");\n  const [address, setAddress] = useState(\"\");\n  const [addressErrorMsg, setAddressErrorMsg] = useState(\"\");\n  const [postcode, setPostcode] = useState(\"\");\n  const [postcodeErrorMsg, setPostcodeErrorMsg] = useState(\"\");\n  const [postarea, setPostarea] = useState(\"\");\n  const [postareaErrorMsg, setPostareaErrorMsg] = useState(\"\");\n  const [phonenumber, setPhonenumber] = useState(\"\");\n  const [phonenumberErrorMsg, setPhonenumberErrorMsg] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [emailErrorMsg, setEmailErrorMsg] = useState(\"\");\n  const [username, setUsername] = useState(\"\");\n  const [serverErrorMsg, setServerErrorMsg] = useState(\"\");\n  useEffect(() => {\n    const getAgencyInfo = () => {\n      axios.get(\"http://localhost:3001/agency?agency_id=\" + props.id, {\n        headers: {\n          token: sessionStorage.getItem(\"token\")\n        }\n      }).then(function (response) {\n        console.log(response);\n        setName(response.data.Agency[0].name);\n        setAddress(response.data.Agency[0].address);\n        setPostcode(response.data.Agency[0].postcode);\n        setPostarea(response.data.Agency[0].postarea);\n        setPhonenumber(response.data.Agency[0].phonenumber);\n        setEmail(response.data.Agency[0].email);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    if (props.edit) {\n      getAgencyInfo();\n    }\n  }, []);\n\n  const axiosUpdate = () => {\n    axios.put('http://localhost:3001/agency/' + props.id, {\n      name: name,\n      address: address,\n      postcode: postcode,\n      postarea: postarea,\n      phonenumber: phonenumber,\n      email: email\n    }, {\n      headers: {\n        token: sessionStorage.getItem(\"token\")\n      }\n    }).then(function (response) {\n      console.log(response);\n      setDialogOpen(false);\n      window.location.reload(false);\n      props.edit(false);\n    }).catch(function (error) {\n      console.log(error.response);\n      setServerErrorMsg(error.response.data.msg);\n    });\n  };\n\n  const handleClose = () => {\n    setDialogOpen(false);\n    props.edit(false);\n  };\n\n  const handleEditClicked = () => {\n    let nameValidationError = false;\n\n    if (name.length === 0 || name === \"\") {\n      setNameErrorMsg(\"Please insert an agency name\");\n      nameValidationError = true;\n    } else {\n      nameValidationError = false;\n      setNameErrorMsg(\"\");\n    }\n\n    if (nameValidationError === false) {\n      axiosUpdate();\n    }\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }, React.createElement(Dialog, {\n    open: dialogOpen,\n    onClose: handleClose,\n    \"aria-labelledby\": \"form-dialog-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, React.createElement(DialogTitle, {\n    id: \"form-dialog-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, \"Edit info\"), React.createElement(DialogContent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    className: classes.formRoot,\n    noValidate: true,\n    autoComplete: \"off\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, React.createElement(TextField, {\n    error: nameErrorMsg != \"\",\n    helperText: nameErrorMsg,\n    required: true,\n    id: \"name\",\n    label: \" Agency name\",\n    value: name,\n    onChange: e => {\n      setName(e.target.value);\n      e.target.value.length === 0 ? setNameErrorMsg(\"Please insert a firstname\") : setNameErrorMsg(\"\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }), React.createElement(TextField, {\n    id: \"address\",\n    label: \"Address\",\n    value: address,\n    onChange: e => {\n      setAddress(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }), React.createElement(TextField, {\n    id: \"postcode\",\n    label: \"Postcode\",\n    value: postcode,\n    onChange: e => {\n      setPostcode(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146\n    },\n    __self: this\n  }), React.createElement(TextField, {\n    id: \"postarea\",\n    label: \"Postarea\",\n    value: postarea,\n    onChange: e => {\n      setPostarea(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }), React.createElement(TextField, {\n    id: \"phonenumber\",\n    label: \"Phonenumber\",\n    value: phonenumber,\n    onChange: e => {\n      setPhonenumber(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158\n    },\n    __self: this\n  }), React.createElement(TextField, {\n    id: \"email\",\n    label: \"Email\",\n    value: email,\n    onChange: e => {\n      setEmail(e.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    style: {\n      color: \"red\",\n      fontWeight: 900,\n      fontSize: 14,\n      marginLeft: 155\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }, serverErrorMsg), React.createElement(DialogActions, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }, React.createElement(Button, {\n    variant: \"contained\",\n    onClick: () => handleEditClicked(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }, \"Edit\"), React.createElement(Button, {\n    variant: \"contained\",\n    onClick: () => handleClose(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }, \"Cancel\")))));\n}","map":{"version":3,"sources":["C:/Users/Pauli/Desktop/groupC/Frontend/vp-app/src/components/editAgency/EditAgencyDialog.js"],"names":["React","useState","useEffect","TextField","makeStyles","Button","Dialog","DialogActions","DialogContent","DialogTitle","axios","useStyles","theme","formRoot","margin","spacing","width","Infotxt","color","EditAgencyDialog","props","classes","dialogOpen","setDialogOpen","name","setName","nameErrorMsg","setNameErrorMsg","address","setAddress","addressErrorMsg","setAddressErrorMsg","postcode","setPostcode","postcodeErrorMsg","setPostcodeErrorMsg","postarea","setPostarea","postareaErrorMsg","setPostareaErrorMsg","phonenumber","setPhonenumber","phonenumberErrorMsg","setPhonenumberErrorMsg","email","setEmail","emailErrorMsg","setEmailErrorMsg","username","setUsername","serverErrorMsg","setServerErrorMsg","getAgencyInfo","get","id","headers","token","sessionStorage","getItem","then","response","console","log","data","Agency","catch","error","edit","axiosUpdate","put","window","location","reload","msg","handleClose","handleEditClicked","nameValidationError","length","e","target","value","fontWeight","fontSize","marginLeft"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport axios from 'axios';\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    formRoot: {\r\n        '& .MuiTextField-root': {\r\n            margin: theme.spacing(1),\r\n            width: '25ch',\r\n        }\r\n    },\r\n    Infotxt: {\r\n        color: 'yellow',\r\n    }\r\n}));\r\n\r\nexport default function EditAgencyDialog(props) {\r\n    \r\n    const classes = useStyles();\r\n\r\n    const [dialogOpen, setDialogOpen] = useState(true);\r\n\r\n    const [name, setName] = useState(\"\");\r\n    const [nameErrorMsg, setNameErrorMsg] = useState(\"\");\r\n\r\n    const [address, setAddress] = useState(\"\");\r\n    const [addressErrorMsg, setAddressErrorMsg] = useState(\"\");\r\n\r\n    const [postcode, setPostcode] = useState(\"\");\r\n    const [postcodeErrorMsg, setPostcodeErrorMsg] = useState(\"\");\r\n\r\n    const [postarea, setPostarea] = useState(\"\");\r\n    const [postareaErrorMsg, setPostareaErrorMsg] = useState(\"\");\r\n\r\n    const [phonenumber, setPhonenumber] = useState(\"\");\r\n    const [phonenumberErrorMsg, setPhonenumberErrorMsg] = useState(\"\");\r\n\r\n    const [email, setEmail] = useState(\"\");\r\n    const [emailErrorMsg, setEmailErrorMsg] = useState(\"\");\r\n\r\n    const [username, setUsername] = useState(\"\");\r\n\r\n    const [serverErrorMsg, setServerErrorMsg] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        const getAgencyInfo = () => {\r\n            axios.get(\"http://localhost:3001/agency?agency_id=\" +  props.id, {\r\n                headers: {\r\n                    token: sessionStorage.getItem(\"token\")\r\n                }\r\n            })\r\n                .then(function (response) {\r\n                    console.log(response);\r\n                    setName(response.data.Agency[0].name);\r\n                    setAddress(response.data.Agency[0].address);\r\n                    setPostcode(response.data.Agency[0].postcode);\r\n                    setPostarea(response.data.Agency[0].postarea);\r\n                    setPhonenumber(response.data.Agency[0].phonenumber);\r\n                    setEmail(response.data.Agency[0].email);\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error);\r\n                })\r\n        }\r\n        if (props.edit)\r\n        {\r\n        getAgencyInfo();\r\n        }\r\n    }, []);\r\n   \r\n    const axiosUpdate = () => {\r\n\r\n        axios.put('http://localhost:3001/agency/'+ props.id,{ \r\n            name: name,\r\n            address: address,\r\n            postcode: postcode,\r\n            postarea: postarea,\r\n            phonenumber: phonenumber,\r\n            email: email,\r\n        },{\r\n        headers: {\r\n            token: sessionStorage.getItem(\"token\")\r\n          }})\r\n            .then(function (response) {\r\n                console.log(response);\r\n                setDialogOpen(false);\r\n                window.location.reload(false);\r\n                props.edit(false);\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error.response);\r\n                setServerErrorMsg(error.response.data.msg);\r\n            });\r\n\r\n    }\r\n\r\n    const handleClose = () => {\r\n        setDialogOpen(false);\r\n        props.edit(false);\r\n      };\r\n\r\n    const handleEditClicked = () => {\r\n\r\n        let nameValidationError = false;\r\n\r\n        if (name.length === 0 || name === \"\") {\r\n            setNameErrorMsg(\"Please insert an agency name\");\r\n            nameValidationError = true;\r\n        }\r\n        else {\r\n            nameValidationError = false;\r\n            setNameErrorMsg(\"\");\r\n        }\r\n\r\n        if (nameValidationError === false) {\r\n            axiosUpdate();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Dialog open={dialogOpen} onClose={handleClose}  aria-labelledby=\"form-dialog-title\">\r\n                <DialogTitle id=\"form-dialog-title\">Edit info</DialogTitle>\r\n                <DialogContent>\r\n                <form className={classes.formRoot} noValidate autoComplete=\"off\">\r\n                        <TextField error={nameErrorMsg != \"\"} helperText={nameErrorMsg} required id=\"name\" label=\" Agency name\" value={name}\r\n                            onChange={(e) => {\r\n                                setName(e.target.value);\r\n                                (e.target.value.length === 0) ? setNameErrorMsg(\"Please insert a firstname\") : setNameErrorMsg(\"\")\r\n                            }} />\r\n\r\n                        <TextField id=\"address\" label=\"Address\" value={address}\r\n                            onChange={(e) => {\r\n                                setAddress(e.target.value);\r\n                            }} />\r\n\r\n                            <br />\r\n\r\n                        <TextField id=\"postcode\" label=\"Postcode\" value={postcode}\r\n                            onChange={(e) => {\r\n                                setPostcode(e.target.value);\r\n                            }} />\r\n\r\n                        <TextField id=\"postarea\" label=\"Postarea\" value={postarea}\r\n                            onChange={(e) => {\r\n                                setPostarea(e.target.value);\r\n                            }} />\r\n\r\n                          <br />\r\n\r\n                        <TextField id=\"phonenumber\" label=\"Phonenumber\" value={phonenumber}\r\n                            onChange={(e) => {\r\n                                setPhonenumber(e.target.value);\r\n                            }} />\r\n\r\n                        <TextField id=\"email\" label=\"Email\" value={email}\r\n                            onChange={(e) => {\r\n                                setEmail(e.target.value);\r\n                            }} />\r\n                    </form>\r\n              \r\n                </DialogContent>\r\n\r\n                <div>\r\n                <p style={{ color: \"red\", fontWeight: 900, fontSize: 14, marginLeft: 155}}>{serverErrorMsg}</p>\r\n\r\n                <DialogActions>\r\n                <Button variant=\"contained\" onClick={() => handleEditClicked()}>Edit</Button>\r\n                <Button variant=\"contained\" onClick={() => handleClose()}>Cancel</Button>\r\n                </DialogActions>\r\n                </div>\r\n            </Dialog>\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}