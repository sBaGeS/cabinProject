{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Pauli\\\\Desktop\\\\groupC\\\\Frontend\\\\vp-app\\\\src\\\\components\\\\pages\\\\my_reservations\\\\GetMyReservations.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Paper from '@material-ui/core/Paper';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Button from '@material-ui/core/Button';\nimport { getAdmin } from \"../../../Utils/Common\";\nimport { set } from 'date-fns';\nimport EditReservationDialog from \"../../editReservation/EditReservationDialog\";\nimport RemoveReservationDialog from \"../../removeReservation/RemoveReservationDialog\";\nimport dateFormat from 'dateformat';\nconst useStyles = makeStyles({\n  cabinDiv: {\n    display: 'grid',\n    background: 'navy',\n    padding: 8,\n    maxWidth: 600,\n    maxHeight: 400\n  },\n  tableHeader: {\n    backgroundColor: 'navy'\n  },\n  tableHeaderCell: {\n    color: 'white'\n  },\n  agencyInfo: {\n    margin: 4,\n    height: 250\n  },\n  editButton: {\n    margin: 4,\n    backgroundColor: 'navy',\n    color: 'white',\n    minWidth: 50\n  }\n});\nexport default function GetMyCabins(props) {\n  const classes = useStyles();\n  const [reservations, setReservations] = useState([]);\n  const [cabinId, setCabinId] = useState([]);\n  const [remove, setRemove] = useState(false);\n  const [edit, setEdit] = useState(false);\n  const [arrivaldate, setArrivaldate] = useState(new Date());\n  const [leavedate, setLeavedate] = useState(new Date());\n  const [people, setPeople] = useState(\"\");\n  const [pets, setPets] = useState(\"\");\n  const [id, setId] = useState(\"\");\n  const token = sessionStorage.getItem('token');\n  const today = dateFormat(Date(), \"dd/mm/yyyy\");\n  let dialog;\n  useEffect(() => {\n    const getReservations = () => {\n      axios.get(\"http://localhost:3001/reservation?person_id=\" + props.id, {\n        headers: {\n          token: token\n        }\n      }).then(function (response) {\n        console.log(response);\n        setReservations(response.data.Reservations);\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    getReservations();\n  }, []);\n\n  const date_diff_indays = function (date1, date2) {\n    const dt1DateParts = date1.split(\"/\");\n    const dt2DateParts = date2.split(\"/\");\n    const dt1 = new Date(dt1DateParts[1] + \"/\" + dt1DateParts[0] + \"/\" + dt1DateParts[2]);\n    const dt2 = new Date(dt2DateParts[1] + \"/\" + dt2DateParts[0] + \"/\" + dt2DateParts[2]);\n    return Math.floor((Date.UTC(dt2.getFullYear(), dt2.getMonth(), dt2.getDate()) - Date.UTC(dt1.getFullYear(), dt1.getMonth(), dt1.getDate())) / (1000 * 60 * 60 * 24));\n  };\n\n  if (remove) {\n    dialog = React.createElement(RemoveReservationDialog, {\n      remove: setRemove,\n      id: id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    });\n  } else if (edit) {\n    dialog = React.createElement(EditReservationDialog, {\n      edit: setEdit,\n      arrivaldate: arrivaldate,\n      leavedate: leavedate,\n      people: people,\n      pets: pets,\n      id: id,\n      cabinId: cabinId,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    });\n  } else {\n    dialog = \"\";\n  }\n\n  if (reservations.length > 0) {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(TableContainer, {\n      component: Paper,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(Table, {\n      className: classes.table,\n      \"aria-label\": \"customized table\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(TableHead, {\n      className: classes.tableHeader,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(TableRow, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(TableCell, {\n      className: classes.tableHeaderCell,\n      align: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"Cabin\"), React.createElement(TableCell, {\n      className: classes.tableHeaderCell,\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, \"Check in\"), React.createElement(TableCell, {\n      className: classes.tableHeaderCell,\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \"Check out\"), React.createElement(TableCell, {\n      className: classes.tableHeaderCell,\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, \"People\"), React.createElement(TableCell, {\n      className: classes.tableHeaderCell,\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \"Pets\"), React.createElement(TableCell, {\n      className: classes.tableHeaderCell,\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"Price\"), React.createElement(TableCell, {\n      className: classes.tableHeaderCell,\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Paid\"), React.createElement(TableCell, {\n      className: classes.tableHeaderCell,\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"Edit reservation\"), React.createElement(TableCell, {\n      className: classes.tableHeaderCell,\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"Cancel reservation\"))), React.createElement(TableBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, reservations.map((reservation, i) => React.createElement(TableRow, {\n      key: i,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(TableCell, {\n      align: \"left\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(Button, {\n      href: `/cabin_detail/${reservation.cabin_id}`,\n      className: classes.editButton,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, reservation.CabinName)), React.createElement(TableCell, {\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, reservation.arrivaldate), React.createElement(TableCell, {\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, reservation.leavedate), React.createElement(TableCell, {\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, reservation.people), React.createElement(TableCell, {\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, reservation.pets === 1 ? \"Yes\" : \"No\"), React.createElement(TableCell, {\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, reservation.amount, \"\\u20AC\"), React.createElement(TableCell, {\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, reservation.paid === 1 ? \"Yes\" : \"No\"), React.createElement(TableCell, {\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, date_diff_indays(today, reservation.arrivaldate) >= 7 || getAdmin() ? React.createElement(Button, {\n      className: classes.editButton,\n      onClick: () => edit ? setEdit(false) : setEdit(true) + setArrivaldate(reservation.arrivaldate) + setLeavedate(reservation.leavedate) + setPeople(reservation.people) + setPets(reservation.pets) + setId(reservation.reservation_id) + setCabinId(reservation.cabin_id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, \"Edit\") : \"-\"), React.createElement(TableCell, {\n      align: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, date_diff_indays(today, reservation.arrivaldate) >= 7 || getAdmin() ? React.createElement(Button, {\n      className: classes.editButton,\n      onClick: () => remove ? setRemove(false) : setRemove(true) + setId(reservation.reservation_id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, \"Cancel\") : \"-\")))))), dialog);\n  } else {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \"You dont have any reservations\");\n  }\n}","map":{"version":3,"sources":["C:/Users/Pauli/Desktop/groupC/Frontend/vp-app/src/components/pages/my_reservations/GetMyReservations.js"],"names":["React","useState","useEffect","axios","makeStyles","Paper","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Button","getAdmin","set","EditReservationDialog","RemoveReservationDialog","dateFormat","useStyles","cabinDiv","display","background","padding","maxWidth","maxHeight","tableHeader","backgroundColor","tableHeaderCell","color","agencyInfo","margin","height","editButton","minWidth","GetMyCabins","props","classes","reservations","setReservations","cabinId","setCabinId","remove","setRemove","edit","setEdit","arrivaldate","setArrivaldate","Date","leavedate","setLeavedate","people","setPeople","pets","setPets","id","setId","token","sessionStorage","getItem","today","dialog","getReservations","get","headers","then","response","console","log","data","Reservations","catch","error","date_diff_indays","date1","date2","dt1DateParts","split","dt2DateParts","dt1","dt2","Math","floor","UTC","getFullYear","getMonth","getDate","length","table","map","reservation","i","cabin_id","CabinName","amount","paid","reservation_id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableContainer from '@material-ui/core/TableContainer';\r\nimport TableHead from '@material-ui/core/TableHead';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport Button from '@material-ui/core/Button';\r\nimport {getAdmin} from \"../../../Utils/Common\"\r\nimport { set } from 'date-fns';\r\nimport EditReservationDialog from \"../../editReservation/EditReservationDialog\";\r\nimport RemoveReservationDialog from \"../../removeReservation/RemoveReservationDialog\";\r\nimport dateFormat from 'dateformat';\r\n\r\n\r\nconst useStyles = makeStyles({\r\n    cabinDiv: {\r\n        display: 'grid',\r\n        background: 'navy',\r\n        padding: 8,\r\n        maxWidth: 600,\r\n        maxHeight: 400\r\n    },\r\n    tableHeader: {\r\n        backgroundColor: 'navy',\r\n        \r\n    },\r\n    tableHeaderCell: {\r\n        color: 'white'\r\n    },\r\n    agencyInfo: {\r\n        margin: 4,\r\n        height: 250\r\n       \r\n    },\r\n    editButton: {\r\n        margin: 4,\r\n        backgroundColor: 'navy',\r\n        color: 'white',\r\n        minWidth: 50,\r\n    },\r\n\r\n});\r\n\r\nexport default function GetMyCabins(props) {\r\n\r\n    const classes = useStyles();\r\n\r\n    const [reservations, setReservations] = useState([]);\r\n\r\n    const [cabinId, setCabinId] = useState([]);\r\n\r\n    const [remove, setRemove] = useState(false);\r\n    const [edit, setEdit] = useState(false);\r\n\r\n    const [arrivaldate, setArrivaldate] = useState(new Date());\r\n    const [leavedate, setLeavedate] = useState(new Date());\r\n    const [people, setPeople] = useState(\"\");\r\n    const [pets, setPets] = useState(\"\");\r\n    const [id, setId] = useState(\"\");\r\n\r\n    const token = sessionStorage.getItem('token');\r\n\r\n    const today = dateFormat(Date(), \"dd/mm/yyyy\");\r\n\r\n    let dialog;\r\n    \r\n    useEffect(() => {\r\n        const getReservations = () => {\r\n            axios.get(\"http://localhost:3001/reservation?person_id=\" + props.id, {\r\n                headers: {\r\n                    token: token\r\n                }\r\n            })\r\n                .then(function (response) {\r\n                    console.log(response);\r\n                    setReservations(response.data.Reservations)\r\n                })\r\n                .catch(function (error) {\r\n                    console.log(error);\r\n                })\r\n        }\r\n        getReservations();\r\n    }, []);\r\n\r\n    const date_diff_indays = function(date1, date2) {\r\n\r\n        const dt1DateParts = date1.split(\"/\");\r\n        const dt2DateParts = date2.split(\"/\");\r\n    \r\n        const dt1 = new Date(dt1DateParts[1] + \"/\" + dt1DateParts[0] + \"/\" + dt1DateParts[2]);\r\n        const dt2 = new Date(dt2DateParts[1] + \"/\" + dt2DateParts[0] + \"/\" + dt2DateParts[2]);\r\n\r\n        return Math.floor((Date.UTC(dt2.getFullYear(), dt2.getMonth(), dt2.getDate()) - Date.UTC(dt1.getFullYear(), dt1.getMonth(), dt1.getDate()) ) /(1000 * 60 * 60 * 24));\r\n        }\r\n\r\n    \r\n    if(remove){\r\n        dialog = <RemoveReservationDialog remove = {setRemove} id={id}/>;\r\n    }\r\n    else if(edit){\r\n        dialog = <EditReservationDialog edit = {setEdit} arrivaldate={arrivaldate} leavedate={leavedate} people={people} pets={pets} id={id} cabinId={cabinId}/>;\r\n    }\r\n    else{\r\n        dialog = \"\";\r\n    }\r\n\r\n\r\n    if(reservations.length > 0){\r\n    return (\r\n        <div>\r\n           <TableContainer component={Paper}>\r\n                            <Table className={classes.table} aria-label=\"customized table\">\r\n                                <TableHead className={classes.tableHeader}>\r\n                                    <TableRow>\r\n                                        <TableCell className={classes.tableHeaderCell} align=\"left\">Cabin</TableCell>\r\n                                        <TableCell className={classes.tableHeaderCell} align=\"center\">Check in</TableCell>\r\n                                        <TableCell className={classes.tableHeaderCell} align=\"center\">Check out</TableCell>\r\n                                        <TableCell className={classes.tableHeaderCell} align=\"center\">People</TableCell>\r\n                                        <TableCell className={classes.tableHeaderCell} align=\"center\">Pets</TableCell>\r\n                                        <TableCell className={classes.tableHeaderCell} align=\"center\">Price</TableCell>\r\n                                        <TableCell className={classes.tableHeaderCell} align=\"center\">Paid</TableCell>\r\n                                        <TableCell className={classes.tableHeaderCell} align=\"center\">Edit reservation</TableCell>\r\n                                        <TableCell className={classes.tableHeaderCell} align=\"center\">Cancel reservation</TableCell>\r\n                                    </TableRow>\r\n                                </TableHead>\r\n                                <TableBody>\r\n                                    {reservations.map((reservation, i) =>\r\n                                        <TableRow key={i}>\r\n                                        <TableCell align=\"left\"><Button href= {`/cabin_detail/${reservation.cabin_id}`} className= {classes.editButton}>{reservation.CabinName}</Button></TableCell>\r\n                                        <TableCell align=\"center\">{reservation.arrivaldate}</TableCell>\r\n                                        <TableCell align=\"center\">{reservation.leavedate}</TableCell>\r\n                                        <TableCell align=\"center\">{reservation.people}</TableCell>\r\n                                        <TableCell align=\"center\">{reservation.pets === 1 ? \"Yes\" : \"No\"}</TableCell>\r\n                                        <TableCell align=\"center\">{reservation.amount}€</TableCell>\r\n                                        <TableCell align=\"center\">{reservation.paid === 1 ? \"Yes\" : \"No\"}</TableCell>\r\n                                    <TableCell align=\"center\">{date_diff_indays(today, reservation.arrivaldate) >= 7 || getAdmin() ? <Button className={classes.editButton} onClick={() => edit ? setEdit(false) : setEdit(true) + setArrivaldate(reservation.arrivaldate) + setLeavedate(reservation.leavedate) + setPeople(reservation.people) +setPets(reservation.pets) + setId(reservation.reservation_id) + setCabinId(reservation.cabin_id)}>Edit</Button> : \"-\"}</TableCell>\r\n                                    <TableCell align=\"center\">{date_diff_indays(today, reservation.arrivaldate) >= 7 || getAdmin() ? <Button className={classes.editButton} onClick={() => remove ? setRemove(false) : setRemove(true) + setId(reservation.reservation_id)}>Cancel</Button> : \"-\" }</TableCell>\r\n                                    </TableRow>)}\r\n                                </TableBody>\r\n                            </Table>\r\n                        </TableContainer>\r\n                        {dialog}\r\n        </div>\r\n    )\r\n    }\r\n    else{\r\n        return(\r\n            <div>\r\n                You dont have any reservations\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}