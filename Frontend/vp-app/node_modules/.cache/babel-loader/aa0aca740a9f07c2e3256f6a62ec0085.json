{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Pauli\\\\Desktop\\\\groupC\\\\Frontend\\\\vp-app\\\\src\\\\components\\\\pages\\\\login\\\\LoginForm.js\";\nimport React, { useState } from 'react';\nimport TextField from '@material-ui/core/TextField';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport axios from 'axios';\nimport { setUserSession } from '../../../Utils/Common';\nimport { useHistory } from 'react-router-dom';\nimport Box from '@material-ui/core/Box';\nconst useStyles = makeStyles(theme => ({\n  searchButton: {\n    margin: 4,\n    backgroundColor: 'navy',\n    color: 'white'\n  },\n  formRoot: {\n    '& .MuiTextField-root': {\n      margin: theme.spacing(1),\n      width: '25ch'\n    }\n  }\n}));\nconst defaultProps = {\n  bgcolor: 'background.paper',\n  m: 1,\n  border: 2,\n  padding: 2,\n  borderRadius: 16\n};\nexport default function LoginForm(props) {\n  const classes = useStyles();\n  let history = useHistory();\n  const [loading, setLoading] = useState(false);\n  const [username, setUsername] = useState(\"\");\n  const [usernameErrorMsg, setUsernameErrorMsg] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [passwordErrorMsg, setPasswordErrorMsg] = useState(\"\");\n  const [serverErrorMsg, setServerErrorMsg] = useState(\"\");\n\n  const axiosLogin = () => {\n    setLoading(true);\n    axios.post('http://localhost:3001/login', {\n      username: username,\n      password: password\n    }).then(response => {\n      setLoading(false);\n      setUserSession(response.data.token);\n      console.log(response.data);\n      history.push('/');\n    }).catch(error => {\n      console.log(error);\n      setServerErrorMsg(error.response.data.msg);\n    });\n  };\n\n  const handleLogin = () => {\n    let usernameValidationError = false;\n    let passwordValidationError = false;\n\n    if (username.length === 0 || username === \"\") {\n      setUsernameErrorMsg(\"Please insert an username\");\n      usernameValidationError = true;\n    } else {\n      usernameValidationError = false;\n      setUsernameErrorMsg(\"\");\n    }\n\n    if (password.length === 0 || password === \"\") {\n      setPasswordErrorMsg(\"Please insert a password\");\n      passwordValidationError = true;\n    } else {\n      passwordValidationError = false;\n      setPasswordErrorMsg(\"\");\n    }\n\n    if (usernameValidationError === false && passwordValidationError === false) {\n      axiosLogin();\n    }\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(Box, Object.assign({\n    borderColor: \"navy\"\n  }, defaultProps, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }), React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, \"Login\"), React.createElement(\"form\", {\n    className: classes.formRoot,\n    noValidate: true,\n    autoComplete: \"off\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, React.createElement(TextField, {\n    error: usernameErrorMsg != \"\",\n    helperText: usernameErrorMsg,\n    required: true,\n    id: \"username\",\n    label: \"Username\",\n    value: username,\n    onChange: e => {\n      setUsername(e.target.value);\n      e.target.value.length === 0 ? setUsernameErrorMsg(\"Please insert an username\") : setUsernameErrorMsg(\"\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }), React.createElement(TextField, {\n    error: passwordErrorMsg != \"\",\n    helperText: passwordErrorMsg,\n    required: true,\n    id: \"password\",\n    label: \"Password\",\n    type: \"password\",\n    value: password,\n    onChange: e => {\n      setPassword(e.target.value);\n      e.target.value.length === 0 ? setPasswordErrorMsg(\"Please insert a password\") : setPasswordErrorMsg(\"\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  })), React.createElement(Button, {\n    variant: \"contained\",\n    className: classes.searchButton,\n    onClick: () => handleLogin(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, \"Login\"), serverErrorMsg ? React.createElement(Box, Object.assign({\n    width: \"11%\",\n    marginLeft: \"13%\",\n    borderColor: \"red\"\n  }, defaultProps, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }), React.createElement(\"a\", {\n    style: {\n      color: \"red\",\n      fontWeight: 900,\n      fontSize: 16\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }, serverErrorMsg)) : null));\n}","map":{"version":3,"sources":["C:/Users/Pauli/Desktop/groupC/Frontend/vp-app/src/components/pages/login/LoginForm.js"],"names":["React","useState","TextField","makeStyles","Button","axios","setUserSession","useHistory","Box","useStyles","theme","searchButton","margin","backgroundColor","color","formRoot","spacing","width","defaultProps","bgcolor","m","border","padding","borderRadius","LoginForm","props","classes","history","loading","setLoading","username","setUsername","usernameErrorMsg","setUsernameErrorMsg","password","setPassword","passwordErrorMsg","setPasswordErrorMsg","serverErrorMsg","setServerErrorMsg","axiosLogin","post","then","response","data","token","console","log","push","catch","error","msg","handleLogin","usernameValidationError","passwordValidationError","length","e","target","value","fontWeight","fontSize"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport axios from 'axios';\r\nimport { setUserSession } from '../../../Utils/Common';\r\nimport {useHistory} from 'react-router-dom';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    searchButton: {\r\n        margin: 4,\r\n        backgroundColor: 'navy',\r\n        color: 'white',\r\n      },\r\n    formRoot: {\r\n        '& .MuiTextField-root': {\r\n            margin: theme.spacing(1),\r\n            width: '25ch',\r\n        },\r\n    },\r\n}));\r\n\r\nconst defaultProps = {\r\n    bgcolor: 'background.paper',\r\n    m: 1,\r\n    border: 2,\r\n    padding: 2,\r\n    borderRadius: 16,\r\n};\r\n\r\n\r\nexport default function LoginForm(props) {\r\n    const classes = useStyles();\r\n    let history = useHistory();\r\n    const [loading, setLoading] = useState(false);\r\n    const [username, setUsername] = useState(\"\");\r\n    const [usernameErrorMsg, setUsernameErrorMsg] = useState(\"\");\r\n\r\n    const [password, setPassword] = useState(\"\");\r\n    const [passwordErrorMsg, setPasswordErrorMsg] = useState(\"\");\r\n\r\n    const [serverErrorMsg, setServerErrorMsg] = useState(\"\");\r\n\r\n    const axiosLogin = () => {\r\n        setLoading(true);\r\n        axios.post('http://localhost:3001/login', { \r\n            username: username, \r\n            password: password\r\n            })\r\n            .then(response => {\r\n            setLoading(false);\r\n            setUserSession(response.data.token);\r\n            console.log(response.data);\r\n            history.push('/');\r\n        }).catch(error => {\r\n            console.log(error);\r\n            setServerErrorMsg(error.response.data.msg);\r\n        });\r\n    }\r\n\r\n    const handleLogin = () => {\r\n\r\n        let usernameValidationError = false;\r\n        let passwordValidationError = false\r\n\r\n        if (username.length === 0 || username === \"\") {\r\n            setUsernameErrorMsg(\"Please insert an username\");\r\n            usernameValidationError = true;\r\n        }\r\n        else {\r\n            usernameValidationError = false;\r\n            setUsernameErrorMsg(\"\");\r\n        }\r\n        if (password.length === 0 || password === \"\") {\r\n            setPasswordErrorMsg(\"Please insert a password\");\r\n            passwordValidationError = true;\r\n        }\r\n        else {\r\n            passwordValidationError = false;\r\n            setPasswordErrorMsg(\"\");\r\n        }\r\n        if (usernameValidationError === false && passwordValidationError === false) {\r\n            axiosLogin();\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Box borderColor=\"navy\" {...defaultProps}>\r\n            <h3>Login</h3>\r\n            <form className={classes.formRoot} noValidate autoComplete=\"off\">\r\n                <TextField error={usernameErrorMsg != \"\"} helperText={usernameErrorMsg} required id=\"username\" label=\"Username\" value={username}\r\n                    onChange={(e) => {\r\n                        setUsername(e.target.value);\r\n                        (e.target.value.length === 0) ? setUsernameErrorMsg(\"Please insert an username\") : setUsernameErrorMsg(\"\")\r\n                    }} />\r\n                <TextField error={passwordErrorMsg != \"\"} helperText={passwordErrorMsg} required id=\"password\" label=\"Password\" type=\"password\" value={password}\r\n                    onChange={(e) => {\r\n                        setPassword(e.target.value);\r\n                        (e.target.value.length === 0) ? setPasswordErrorMsg(\"Please insert a password\") : setPasswordErrorMsg(\"\")\r\n                    }} />\r\n            </form>\r\n            <Button variant=\"contained\" className = {classes.searchButton} onClick={() => handleLogin()}>Login</Button>\r\n            {serverErrorMsg ? <Box width=\"11%\" marginLeft=\"13%\" borderColor=\"red\"{...defaultProps}><a style={{ color: \"red\", fontWeight: 900, fontSize: 16}}>{serverErrorMsg}</a></Box> : null}\r\n            </Box>\r\n        </div>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}